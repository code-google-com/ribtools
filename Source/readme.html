<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
    "http://www.w3.org/TR/html4/strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Building RibTools</title>
<meta name="Generator" content="Vim reStructured Text 140 - Vim 7.2" />

<style type="text/css">
/*<![CDATA[*/
body { color: #000; background-color: #fff; margin: 0px 10%; min-width: 720px; font-family: Verdana, sans-serif;
       counter-reset: chapter section subsection subsubsection paragraph lchapter lsection lsubsection lsubsubsection lparagraph}
div.footnote { border-left: 1px solid #000; margin-left: 0em; clear: both }
div.ftext { position: relative; margin-left: 50px }
div.fnumber { float: left; width: 40px; padding: 0em; margin-left: 0.5em; margin-top: 0em }
div.fnumber a { margin: 0px; padding: 0px }
div.ctext { position: relative; margin-left: 100px }
div.cnumber { float: left; width: 90px; padding: 0em; margin-left: 0.5em; margin-top: 0em }
div.cnumber a { margin: 0px; padding: 0px }
div.tip { border: 2px solid #0d0; margin: 0.5em 2em 1em 2em; padding: 0em 1em }
div.warning, div.caution, div.danger, div.error { border: 2px solid #f00; margin: 0.5em 2em 1em 2em; padding: 0em 1em }
div.note, div.hint, div.important { border: 2px solid #000; margin: 0.5em 2em 1em 2em; padding: 0em 1em }
div.figure { display: block; padding: 1em; width: 400px; clear: both}
div.topic { margin: 2em }
div.vstsidebar, div.sidebar { border: 2px solid #aaa; color: #000; background-color: #ffffee; float: right; width: 40%; margin-left: 1em; margin-right: -1em; padding: 1em }
span.strike { text-decoration: line-through }
span.big { font-size: large }
span.small { font-size: small }
span.title { font-style: italic }
span.notetitle { font-size: large; font-weight: 900; font-family: Verdana, sans-serif }
p.toc { font-size: large; font-weight: 900 }
p.notesubtitle { font-weight: 900; font-family: Verdana, sans-serif }
p.attribution { font-style: italic; margin-left: 8em; text-indent: -1.4em }
.vstright { float: right; margin: 1em }
.vstleft { float: left; margin: 1em }
.vstcenter { margin: 1em auto }
blockquote.pull { font-size: large }
p.rubric { font-size: large; margin-left: 2em }
dd.normal { margin-bottom: 0.5em }
dt.option { float: left; margin: 0em 0em 5px 2em; padding: 0px; font-family: monospace }
dd.option { padding: 0px; margin: 0em 0em 5px 10em; text-indent: 0.5em }
dd.option > p { margin: 0px }
dd.normal > p { margin: 0px }
table { border-collapse: collapse; margin: 0.5em 0em }
thead, tfoot { text-align: center; font-weight: bold }
td { border: 1px solid #000; padding: 0.25em; _top: 0%; vertical-align: top }
td blockquote p{ margin: 0px; padding: 0px}
td blockquote { margin: 0px; padding: 0px}
table.vstbless td { border: 0px solid #000; padding: 0.25em; _top: 0%; vertical-align: top }
td > p { margin: 0px }
table.field { border: 0px solid #000; margin-left: 2em; padding: 0.25em; _top: 0%; vertical-align: top }
td.fkey { font-weight: 900 }
td.fval { border: 0px solid #000; padding: 0.25em; _top: 0%; vertical-align: top }
td.fkey { font-weight: 900; border: 0px solid #000; padding: 0.25em; _top: 0%; vertical-align: top }
td.fdkey { text-align: center; font-weight: 900 }
td.fdval { text-align: center; font-style: italic }
td.fakey { text-align: center; font-weight: 900 }
td.faval { border: 0px solid #000; padding: 0.25em; _top: 0%; vertical-align: top }
hr { width: 80%; margin: 1.5em auto }
h1 { text-align: center; clear: both }
h2, h3, h4, h5, h6 { text-align: left; margin-top: 1em; clear: both }
h2 { counter-reset: section subsection subsubsection paragraph }
h3 { counter-reset: subsection subsubsection paragraph }
h4 { counter-reset: subsubsection paragraph }
h5 { counter-reset: paragraph }
h1 a { color: #000; background-color: transparent }
h2 a { color: #000; background-color: transparent }
h3 a { color: #000; background-color: transparent }
h4 a { color: #000; background-color: transparent }
h5 a { color: #000; background-color: transparent }
h6 a { color: #000; background-color: transparent }
p.subh1 { text-align: center; font-size: 120%; font-variant: small-caps }
p.subh2, p.subh3, p.subh4, p.subh5, p.subh6 { text-align: left; font-size: 120%; font-variant: small-caps }
h2:before { content: counter(chapter)" "; counter-increment: chapter }
h3:before { content: counter(chapter)"."counter(section)" "; counter-increment: section }
h4:before { content: counter(chapter)"."counter(section)"."counter(subsection)" "; counter-increment: subsection }
h5:before { content: counter(chapter)"."counter(section)"."counter(subsection)"."counter(subsubsection)" "; counter-increment: subsubsection }
h6:before { content: counter(chapter)"."counter(section)"."counter(subsection)"."counter(subsubsection)"."counter(paragraph)" "; counter-increment: paragraph}
li.h1 { margin-left: 0em }
li.h2 { margin-left: 1em; counter-reset: lsection lsubsection lsubsubsection lparagraph }
li.h3 { margin-left: 2em; counter-reset: lsubsection lsubsubsection lparagraph }
li.h4 { margin-left: 3em; counter-reset: lsubsubsection lparagraph }
li.h5 { margin-left: 4em; counter-reset: lparagraph }
li.h2:before { content: counter(lchapter)" "; counter-increment: lchapter }
li.h3:before { content: counter(lchapter)"."counter(lsection)" "; counter-increment: lsection }
li.h4:before { content: counter(lchapter)"."counter(lsection)"."counter(lsubsection)" "; counter-increment: lsubsection }
li.h5:before { content: counter(lchapter)"."counter(lsection)"."counter(lsubsection)"."counter(lsubsubsection)" "; counter-increment: lsubsubsection }
li.h6:before { content: counter(lchapter)"."counter(lsection)"."counter(lsubsection)"."counter(lsubsubsection)"."counter(lparagraph)" "; counter-increment: lparagraph}
li.h6 { margin-left: 5em }
ol, ul { margin-bottom: 0.5em; margin-top: 0.5em }
ol.loweralpha { list-style-type: lower-alpha }
ol.upperalpha { list-style-type: upper-alpha }
ol.lowerroman { list-style-type: lower-roman }
ol.upperroman { list-style-type: upper-roman }
ol.decimal { list-style-type: decimal }
ul.square { list-style-type: square }
ul.circle { list-style-type: circle }
ul.disc { list-style-type: disc }
li > p { margin: 0em }
img { border: 1px solid #000; padding: 0em; display: block; margin: 1em auto }
img.inline { border: 1px solid #000; padding: 0em; margin: 0em; display: inline }
pre { color: #000; background-color: #eee; margin-left: 2em; clear: both; overflow: auto }
div.unknown { font-family: monospace; color: #000; background-color: #fff; margin: 1em; padding: 1em; clear: both; border: 3px solid red}
pre.quoted { color: #000; background-color: #eee; margin-left: 0em; clear: both; overflow: auto  }
pre.rawlatex { color: #000; background-color: #ddd; border: 1px solid #000; padding: 0.1em; clear: both; overflow: auto  }
pre.address { font-family: Verdana, sans-serif; display: inline; margin: 0px; color: #000; background-color: #fff; overflow: auto }
span.target { text-decoration: underline }
div.vstfooter hr { width: 100%; margin: 0px }
div.vstfooter p { margin: 0px }
/*]]>*/
</style>

</head>
<body>

<h1 id="lbuilding-ribtools"><a href="#toc-lbuilding-ribtools">Building RibTools</a></h1>
<table class="field" summary="Field list"><tr><td class="fkey">Authors:</td><td class="fval"> Davide Pasca</td></tr>

<tr><td class="fkey">Version:</td><td class="fval"> 2010/6/8</td></tr>
</table>
<p id="tocheader" class="toc">Contents</p>
<ul class="toc">
 <li class="h1" id="toc-lbuilding-ribtools"><a href="#lbuilding-ribtools">Building RibTools</a></li>
  <li class="h2" id="toc-lpreface"><a href="#lpreface">Preface</a></li>
  <li class="h2" id="toc-lrequirements"><a href="#lrequirements">Requirements</a></li>
  <li class="h2" id="toc-lthe-code"><a href="#lthe-code">The Code</a></li>
  <li class="h2" id="toc-ldirectory-structure"><a href="#ldirectory-structure">Directory Structure</a></li>
  <li class="h2" id="toc-lthe-distrib-directory"><a href="#lthe-distrib-directory">The Distrib Directory</a></li>
  <li class="h2" id="toc-lcompiling-and-running-from-vs"><a href="#lcompiling-and-running-from-vs">Compiling and running from VS</a></li>
   <li class="h3" id="toc-lbuilding-the-solution"><a href="#lbuilding-the-solution">Building the solution</a></li>
   <li class="h3" id="toc-la-little-test"><a href="#la-little-test">A little test</a></li>
   <li class="h3" id="toc-lrunning-from-visual-studio"><a href="#lrunning-from-visual-studio">Running from Visual Studio</a></li>
    <li class="h4" id="toc-lset-the-choosen-application-as-the-startup-project"><a href="#lset-the-choosen-application-as-the-startup-project">Set the choosen application as the StartUp project</a></li>
    <li class="h4" id="toc-lsetup-the-working-directory"><a href="#lsetup-the-working-directory">Setup the working directory</a></li>
    <li class="h4" id="toc-lrun-4033333341"><a href="#lrun-4033333341">Run (!!!)</a></li>
</ul>
<!--.. comment:: end of toc -->
<h2 id="lpreface"><a href="#toc-lpreface">Preface</a></h2>

<p>
This document is about building <em>RibTools</em>.
</p>

<p>
For usage, see the <a href="DistribSrc/base/docs/User_Manual.html" title="User Manual">User Manual</a>
</p>


<h2 id="lrequirements"><a href="#toc-lrequirements">Requirements</a></h2>

<p>
<em>RibTools</em> currently only compiles for Windows, although the code is written with portability in mind and Windows-specific code is kept to a minimum.
</p>

<p>
On Windows the required tools are:
</p>

 <ul class="circle">
<li>

<p>
Microsoft Visual Studio 2008 <a href="http://www.microsoft.com/downloads/details.aspx?FamilyId=FBEE1648-7106-44A7-9649-6D9F6D58056E&displaylang=en" title="SP1">SP1</a>
</p>

</li>
<li>

<p>
<a href="http://www.cmake.org" title="CMake">CMake</a> 2.8 or better
</p>


</li>
</ul>


<h2 id="lthe-code"><a href="#toc-lthe-code">The Code</a></h2>

<p>
<em>RibTools</em> is released under the <a href="http://www.opensource.org/licenses/bsd-license.php" title="New BSD license">New BSD license</a>.
</p>


<p>
The code is officially located at <a href="http://ribtools.googlecode.com">http://ribtools.googlecode.com</a> .
</p>

<h2 id="ldirectory-structure"><a href="#toc-ldirectory-structure">Directory Structure</a></h2>

<p>
As obtained from the repository:
</p>

<p>
<strong>Source/</strong>
</p>

<table class="vstborder" summary=""><col width="27%" /><col width="63%" />
<tr><td>

<p>
<strong>DImage/</strong>
</p>

</td><td>

<p>
Bitmap images library
</p>

</td></tr>
<tr><td>

<p>
<strong>DispDrivers/</strong>
</p>

</td><td>

<p>
Display drivers sources
</p>

</td></tr>
<tr><td>

<p>
<strong>DistribSrc/</strong>
</p>

</td><td>

<p>
Source assets
</p>

</td></tr>
<tr><td>

<p>
<strong>DMath/</strong>
</p>

</td><td>

<p>
Math library sources and project
</p>

</td></tr>
<tr><td>

<p>
<strong>docs/</strong>
</p>

</td><td>

<p>
Documentation related files (currently just some images)
</p>

</td></tr>
<tr><td>

<p>
<strong>DSystem/</strong>
</p>

</td><td>

<p>
Base system library sources and projects
</p>

</td></tr>
<tr><td>

<p>
<strong>external/</strong>
</p>

</td><td>

<p>
External libraries, directly included
</p>

</td></tr>
<tr><td>

<p>
<strong>externals/</strong>
</p>

</td><td>

<p>
External libraries included automatically by SVN
</p>

</td></tr>
<tr><td>

<p>
<strong>RI_System/</strong>
</p>

</td><td>

<p>
Core rendering engine and RenderMan-interface
</p>

</td></tr>
<tr><td>

<p>
<strong>RibRender/</strong>
</p>

</td><td>

<p>
RibRender application project and sources
</p>

</td></tr>
<tr><td>

<p>
<strong>RibRenderLib/</strong>
</p>

</td><td>

<p>
A library that groups most functionalities used by both <em>RibRender *and *RibRenderToy</em>
</p>

</td></tr>
<tr><td>

<p>
<strong>RibRenderServer/</strong>
</p>

</td><td>

<p>
RibRenderServer application project and sources
</p>

</td></tr>
<tr><td>

<p>
<strong>RibRenderToy/</strong>
</p>

</td><td>

<p>
RibRenderToy application project and sources
</p>

</td></tr>
<tr><td>

<p>
<strong>RSLCompilerCmd/</strong>
</p>

</td><td>

<p>
RSLCompilerCmd application project and sources
</p>

</td></tr>
<tr><td>

<p>
<strong>RSLCompilerLib/</strong>
</p>

</td><td>

<p>
RSL compiler library
</p>

</td></tr>
<tr><td>

<p>
<em>CMakeLists.txt</em>
</p>

</td><td>

<p>
Root CMake file to create the build files
</p>

</td></tr>
<tr><td>

<p>
<em>license.txt</em>
</p>

</td><td>

<p>
License file
</p>

</td></tr>
<tr><td>

<p>
<em>make_build.bat</em>
</p>

</td><td>

<p>
Script that creates the <code>../build</code> directory and its contents
</p>

</td></tr>
<tr><td>

<p>
<em>make_distrib.bat</em>
</p>

</td><td>

<p>
Script that creates the <code>../Distrib</code> directory and its contents
</p>

</td></tr>
<tr><td>

<p>
<em>make_install.bat</em>
</p>

</td><td>

<p>
Script that builds a .zip file for binary distribution (assumes EXEs have been manually compiled with VS)
</p>

</td></tr>
<tr><td>

<p>
<em>readme.txt</em>
</p>

</td><td>

<p>
Readme file in txt format (and reST)
</p>

</td></tr>
<tr><td>

<p>
<em>readme.html</em>
</p>

</td><td>

<p>
Readme file in HTML format
</p>

</td></tr>
</table>
<h2 id="lthe-distrib-directory"><a href="#toc-lthe-distrib-directory">The Distrib Directory</a></h2>

<p>
A directory named <code>Distrib</code> is generated outside <code>Source</code> as part of the build process. This directory is automatically generated, and it can therefore be safely erased (unless one has any important changes in it !)
</p>

<p>
The <code>Distrib</code> directory contains both data coming from <code>DistribSrc</code> and executables generated when compiling with Visual Studio (see below).
</p>

<p>
When running, it's is advised to have the environment variable <code>RIBTOOLS_DIR</code> set to the <code>Distrib</code> directory.
For more informations on how to setup the environment variable, see the instructions at the [[User_Manual#General_Usage|General Usage]] section of the <em>User Manual</em>.
</p>

<h2 id="lcompiling-and-running-from-vs"><a href="#toc-lcompiling-and-running-from-vs">Compiling and running from VS</a></h2>
<h3 id="lbuilding-the-solution"><a href="#toc-lbuilding-the-solution">Building the solution</a></h3>

<p>
From the <em>Source</em> directory launch the batch <code>make_build.bat</code>
This script will create he <code>build</code> directory and automatically call <code>make_distrib.bat</code> to create the <code>Distrib</code> directory.
</p>

<p>
Launch the newly created Visual Studio solution that can be found at <code>build/RibTools.sln</code>.
</p>

<p>
From the Standard Toolbar select a <em>solution configuration</em> (<strong>Debug</strong> or <strong>Release</strong>).
</p>

<p>
Build the solution by selecting the option from the <strong>Build</strong> menu (or press F7 or Ctrl+Alt+B, depending on the VS configuration)
</p>

<p>
Once the build is finished the <code>Distrib</code> directory should contain 4 executables:
</p>

    <ul class="circle">
<li>

<p>
<em>RibRender.exe</em>
</p>

</li>
<li>

<p>
<em>RibRenderServer.exe</em>
</p>

</li>
<li>

<p>
<em>RibRenderToy.exe</em>
</p>

</li>
<li>

<p>
<em>RSLCompilerCmd.exe</em>
</p>


</li>
</ul>

<p>
Note that for every <em>.exe</em> file there is a corresponding <em>.idb</em> file. These files hold debug data necessary to display symbols when debugging with Visual Studio's debugger.
</p>

<h3 id="la-little-test"><a href="#toc-la-little-test">A little test</a></h3>
    <ul class="circle">
<li>

<p>
From the <code>Distrib</code> directory, launch <code>RibRenderToy.exe</code>
</p>

</li>
<li>

<p>
Right-click inside the RibRenderToy window and select a test scene from the pop-up menu (<em>Airplane.rib</em> is a safe bet)
</p>

</li>
<li>

<p>
After a little while the scene should appear in all it's beauty (!)
</p>


</li>
</ul>
<h3 id="lrunning-from-visual-studio"><a href="#toc-lrunning-from-visual-studio">Running from Visual Studio</a></h3>

<p>
In order to run form visual studio, a one time setup is necessary.
</p>

<h4 id="lset-the-choosen-application-as-the-startup-project"><a href="#toc-lset-the-choosen-application-as-the-startup-project">Set the choosen application as the StartUp project</a></h4>

<p>
Right-click on an executable project (e.g. <em>RibRenderToy</em>), and choose <strong>Set as StartUp Project</strong> from the pop-up menu.
</p>

<h4 id="lsetup-the-working-directory"><a href="#toc-lsetup-the-working-directory">Setup the working directory</a></h4>
    <ul class="circle">
<li>

<p>
Right-click on the application project (e.g. <em>RibRenderToy</em>) and select <strong>Properties</strong> from the pop-up menu
</p>

</li>
<li>

<p>
From the list at the left of the dialog, select <strong><em>Configuration Properties -&gt; Debugging</em></strong>
</p>

</li>
<li>

<p>
Where it says <strong><em>Working Directory</em></strong> set it to <code>..\..\Distrib</code>
</p>


</li>
</ul>

<p>
<strong>Note:</strong> Set this for all the configurations (<em>Release</em> and <em>Debug</em>).
A common mistake is to set up the <em>Working Directory</em> only for the current configuration and forget about the other configurations.
</p>

<h4 id="lrun-4033333341"><a href="#toc-lrun-4033333341">Run (!!!)</a></h4>

<p>
Run the application with or without the debugger by pressing F5, Ctrl+F5 (or whatever is your configuration 8)
</p>

</body>
</html>

